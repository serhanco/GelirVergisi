<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Gelir Vergisi Hesaplama</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 20px auto; padding: 20px; }
        .container { background: #f5f5f5; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        input, button { padding: 8px; margin: 10px 0; }
        .result { margin-top: 20px; background: white; padding: 15px; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Gelir Vergisi Hesaplayıcı</h1>
        <label for="income">Yıllık Gelir (TL):</label>
        <input type="number" id="income" placeholder="Örnek: 500000">
        <button onclick="calculateTax()">Hesapla</button>
        
        <div class="result" id="taxAmount"></div>
        <div class="result" id="effectiveRate"></div>
        <div class="result" id="calculationSteps"></div>
    </div>

    <script>
        const taxBrackets = [
            { limit: 158000, rate: 0.15, base: 0 },
            { limit: 330000, rate: 0.20, base: 23700 },
            { limit: 800000, rate: 0.27, base: 58100 },
            { limit: 4300000, rate: 0.35, base: 185000 },
            { limit: Infinity, rate: 0.40, base: 1410000 }
        ];

        const VERGI_DILIMLERI_2025 = [
            { limit: 240_000, oran: 0.15 },
            { limit: 520_000, oran: 0.20 },
            { limit: 1_200_000, oran: 0.27 },
            { limit: 5_800_000, oran: 0.35 },
            { limit: Infinity, oran: 0.40 }
        ];

        function calculateTax() {
            const incomeValue = document.getElementById('income').value;
            const income = parseFloat(incomeValue.replace(/[.]/g, ''));

            if (!income || income < 0) {
                alert("Lütfen geçerli bir pozitif sayı giriniz");
                return;
            }

            let tax = 0;
            let explanation = "Hesaplama Detayları:<br>";
            
            for(let i = 0; i < taxBrackets.length; i++) {
                const bracket = taxBrackets[i];
                const prevLimit = i > 0 ? taxBrackets[i-1].limit : 0;
                
                if(income > prevLimit) {
                    const taxableAmount = Math.min(income, bracket.limit) - prevLimit;
                    const bracketTax = taxableAmount * bracket.rate;
                    
                    if(i === 0) {
                        tax = bracketTax;
                        explanation += `• İlk ${bracket.limit.toLocaleString('tr-TR')} TL için %${bracket.rate*100}: <strong>${bracketTax.toLocaleString('tr-TR')} TL</strong><br>`;
                    } else {
                        tax = bracket.base + bracketTax;
                        explanation += `• ${prevLimit.toLocaleString('tr-TR')} TL ile ${bracket.limit.toLocaleString('tr-TR')} TL arasındaki ${taxableAmount.toLocaleString('tr-TR')} TL için %${bracket.rate*100}: <strong>${bracketTax.toLocaleString('tr-TR')} TL</strong><br>`;
                    }
                }
            }

            const effectiveRate = income > 0 ? (tax / income * 100).toFixed(2) : 0;
            
            document.getElementById('taxAmount').innerHTML = 
                `Ödenecek Vergi: ${tax.toLocaleString('tr-TR')} TL`;
            document.getElementById('effectiveRate').innerHTML = 
                `Etkin Vergi Oranı: %${effectiveRate}`;
            document.getElementById('calculationSteps').innerHTML = explanation;
        }
    </script>
</body>
</html>